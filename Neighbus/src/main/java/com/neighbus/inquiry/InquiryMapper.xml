<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.neighbus.inquiry.InquiryMapper"> 
    
    <insert id="insertInquiry" parameterType="com.neighbus.inquiry.InquiryDto"> 
        INSERT INTO inquiry (title, content, writer, created_at, status)
        VALUES (
            #{title}, 
            #{content}, 
            #{writerId},
            NOW(), 
            1 
        )
    </insert>

   <select id="selectAllInquiries" resultType="map">
        SELECT 
            i.id, 
            i.title, 
            i.content, 
            i.created_at, 
            i.status, 
            -- ğŸš¨ ìˆ˜ì •: u.username ëŒ€ì‹  u.name (ë³¸ëª…)ì„ ê°€ì ¸ì˜¤ë„ë¡ ë³€ê²½
            u.name AS writer_name, 
            u.email AS writer_email, 
            i.writer AS writer_id 
        FROM inquiry i
        JOIN users u ON i.writer = u.id
        ORDER BY i.created_at DESC;
    </select>
    
    </mapper>