<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.UserMapper">

  <!-- 마이페이지 - 회원 기본정보 조회 -->
  <select id="selectMyPageInfo" parameterType="string" resultType="com.neighbus.account.AccountDTO">
    SELECT 
        user_id,
        username,
        email,
        nickname,
        region,
        rating,
        created_at
    FROM users
    WHERE username = #{username}
  </select>

  <!-- 마이페이지 - 해당 사용자의 게시글 목록 조회 -->
  <select id="selectMyPosts" parameterType="string" resultType="com.neighbus.mypage.PostDTO">
    SELECT 
        p.post_id,
        p.title,
        p.content,
        p.created_at,
        p.updated_at
    FROM posts p
    INNER JOIN users u ON p.user_id = u.user_id
    WHERE u.username = #{username}
    ORDER BY p.created_at DESC
  </select>

</mapper>
